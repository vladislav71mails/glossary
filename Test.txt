–û—Ç–ª–∏—á–Ω–æ! –î–∞–≤–∞–π —Å–Ω–∞—á–∞–ª–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ—Ä–∞–±–æ—Ç–∞–µ–º **—Ç–µ—Å—Ç–æ–≤–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ** (—Ç–æ —Å–∞–º–æ–µ –ø—Ä–æ—Å—Ç–æ–µ —Å popup-–æ–∫–Ω–æ–º), —á—Ç–æ–±—ã –≤ –Ω—ë–º —É–∂–µ –±—ã–ª–æ:

1. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ YouGile.
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ID —Å–æ–∑–¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ –ª–æ–∫–∞–ª—å–Ω–æ.
3. –ù–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ **¬´–ú–æ–∏ –∑–∞–¥–∞—á–∏¬ª** –≤ popup.
4. –ü—Ä–∏ –∫–ª–∏–∫–µ ‚Äî —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–≤–æ–∏—Ö –∑–∞–¥–∞—á —Å:
   - —Ç–µ–º–æ–π,
   - —Ç–µ–∫—É—â–∏–º —Å—Ç–∞—Ç—É—Å–æ–º (–Ω–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏),
   - –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫–∞–∫ –∏—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç,
   - —Å—Å—ã–ª–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∑–∞–¥–∞—á–∏ –≤ YouGile.

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

#### 1. `manifest.json` (–¥–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ storage ‚Äî —É–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
```json
{
  "manifest_version": 3,
  "name": "–¢–µ—Å—Ç YouGile ‚Äî –ó–∞–¥–∞—á–∏ + –°—Ç–∞—Ç—É—Å—ã",
  "version": "1.1",
  "description": "–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ YouGile –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Ö —Å—Ç–∞—Ç—É—Å–∞",
  "icons": {
    "16": "icon16.png",
    "48": "icon48.png",
    "128": "icon128.png"
  },
  "action": {
    "default_popup": "popup.html",
    "default_title": "YouGile: –∑–∞–¥–∞—á–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã"
  },
  "permissions": [
    "storage"
  ],
  "host_permissions": [
    "https://yougile.com/*"
  ]
}
```

#### 2. `popup.html` (–¥–æ–±–∞–≤–ª—è–µ–º –≤—Ç–æ—Ä—É—é –≤–∫–ª–∞–¥–∫—É/–∫–Ω–æ–ø–∫—É)
```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body {
      width: 400px;
      padding: 20px;
      font-family: Arial, sans-serif;
    }
    .tabs {
      display: flex;
      margin-bottom: 20px;
      border-bottom: 1px solid #ccc;
    }
    .tab {
      padding: 10px 15px;
      cursor: pointer;
      font-weight: bold;
    }
    .tab.active {
      border-bottom: 3px solid #00a86b;
      color: #00a86b;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }
    label { display: block; margin: 10px 0 5px; font-weight: bold; }
    input, textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
    textarea { height: 100px; resize: vertical; }
    button.primary {
      margin-top: 15px; width: 100%; padding: 10px; background: #00a86b; color: white;
      border: none; border-radius: 4px; font-size: 16px; cursor: pointer;
    }
    button.primary:hover { background: #008f5a; }
    .status { margin-top: 10px; text-align: center; font-weight: bold; }
    .success { color: green; }
    .error { color: red; }

    /* –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á */
    .task-item {
      border: 1px solid #ddd;
      padding: 12px;
      margin-bottom: 10px;
      border-radius: 6px;
      background: #f9f9f9;
    }
    .task-title { font-weight: bold; margin-bottom: 5px; }
    .task-status { color: #666; font-size: 0.9em; }
    .task-result {
      margin: 10px 0;
      padding: 10px;
      background: #e8f5e8;
      border-left: 4px solid #28a745;
      border-radius: 4px;
    }
    .task-link { margin-top: 8px; }
    .task-link a { color: #007bff; text-decoration: none; }
    .task-link a:hover { text-decoration: underline; }
    .no-tasks { text-align: center; color: #666; margin-top: 20px; }
  </style>
</head>
<body>
  <div class="tabs">
    <div class="tab active" data-tab="create">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</div>
    <div class="tab" data-tab="list">–ú–æ–∏ –∑–∞–¥–∞—á–∏</div>
  </div>

  <!-- –í–∫–ª–∞–¥–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è -->
  <div id="create" class="tab-content active">
    <label>–¢–µ–º–∞</label>
    <input type="text" id="title" placeholder="–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –∑–∞–¥–∞—á—É">

    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
    <textarea id="description" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>

    <button id="createTask" class="primary">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
    <div id="status" class="status"></div>
  </div>

  <!-- –í–∫–ª–∞–¥–∫–∞ —Å–ø–∏—Å–∫–∞ -->
  <div id="list" class="tab-content">
    <div id="tasks-list">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
```

#### 3. `popup.js` (–ø–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞)
```javascript
// === –ù–ê–°–¢–†–û–ô–ö–ò ===
const YOUGILE_API_KEY = '–í–°–¢–ê–í–ò–¢–¨_–°–í–û–ô_–ö–õ–Æ–ß';        // ‚Üê –¢–≤–æ–π Bearer token
const YOUGILE_COLUMN_ID = '–í–°–¢–ê–í–ò–¢–¨_ID_–ö–û–õ–û–ù–ö–ò';      // ‚Üê ID –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
const USER_NAME = '–¢–≤–æ—ë_–ò–º—è_–§–∞–º–∏–ª–∏—è';                // ‚Üê –ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç (–¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –∑–∞–¥–∞—á)
// =========================

document.addEventListener('DOMContentLoaded', () => {
  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
      tab.classList.add('active');
      document.getElementById(tab.dataset.tab).classList.add('active');

      if (tab.dataset.tab === 'list') {
        loadMyTasks();
      }
    });
  });

  // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
  document.getElementById('createTask').addEventListener('click', createTask);
});

async function createTask() {
  const title = document.getElementById('title').value.trim();
  const description = document.getElementById('description').value.trim();
  const statusEl = document.getElementById('status');

  if (!title) {
    statusEl.textContent = '–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É!';
    statusEl.className = 'status error';
    return;
  }

  statusEl.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
  statusEl.className = 'status';

  try {
    const response = await fetch('https://yougile.com/api-v2/tasks', {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${YOUGILE_API_KEY}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        title: `–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –æ—Ç ${USER_NAME}: ${title}`,
        description: description || '–°–æ–∑–¥–∞–Ω–æ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ',
        columnId: YOUGILE_COLUMN_ID
      })
    });

    if (response.ok) {
      const data = await response.json();

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–¥–∞—á—É –ª–æ–∫–∞–ª—å–Ω–æ
      const saved = { taskId: data.id, title: title, createdAt: new Date().toISOString() };
      chrome.storage.local.get(['myTasks'], (result) => {
        const tasks = result.myTasks || [];
        tasks.push(saved);
        chrome.storage.local.set({ myTasks: tasks });
      });

      statusEl.textContent = '–ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞!';
      statusEl.className = 'status success';
      document.getElementById('title').value = '';
      document.getElementById('description').value = '';
    } else {
      const err = await response.json();
      statusEl.textContent = '–û—à–∏–±–∫–∞: ' + (err.message || '–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ');
      statusEl.className = 'status error';
    }
  } catch (err) {
    statusEl.textContent = '–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + err.message;
    statusEl.className = 'status error';
  }
}

async function loadMyTasks() {
  const listEl = document.getElementById('tasks-list');

  chrome.storage.local.get(['myTasks'], async (result) => {
    const tasks = result.myTasks || [];

    if (tasks.length === 0) {
      listEl.innerHTML = '<div class="no-tasks">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á</div>';
      return;
    }

    listEl.innerHTML = '<div>–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤...</div>';

    let html = '';
    for (const saved of tasks) {
      try {
        const resp = await fetch(`https://yougile.com/api-v2/tasks/${saved.taskId}`, {
          headers: { 'Authorization': `Bearer ${YOUGILE_API_KEY}` }
        });

        if (!resp.ok) throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å');

        const task = await resp.json();

        // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏
        let columnTitle = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
        try {
          const colResp = await fetch(`https://yougile.com/api-v2/columns/${task.columnId}`, {
            headers: { 'Authorization': `Bearer ${YOUGILE_API_KEY}` }
          });
          if (colResp.ok) {
            const col = await colResp.json();
            columnTitle = col.title;
          }
        } catch {}

        // –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
        let lastComment = '<i>–ù–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤</i>';
        if (task.comments && task.comments.length > 0) {
          lastComment = task.comments[task.comments.length - 1].text || '–ë–µ–∑ —Ç–µ–∫—Å—Ç–∞';
        }

        const isCompleted = /–≥–æ—Ç–æ–≤|–∑–∞–≤–µ—Ä—à|done|closed/i.test(columnTitle);
        const openLink = `https://yougile.com/#${task.boardId || ''}/${task.columnId}/${task.id}`;

        html += `
          <div class="task-item">
            <div class="task-title">${task.title || saved.title}</div>
            <div class="task-status">–°—Ç–∞—Ç—É—Å: ${columnTitle}</div>
            ${isCompleted ? `<div class="task-result"><strong>–ò—Ç–æ–≥:</strong> ${lastComment}</div>` : ''}
            <div class="task-link"><a href="${openLink}" target="_blank">–û—Ç–∫—Ä—ã—Ç—å –≤ YouGile ‚Üí</a></div>
          </div>
        `;
      } catch (err) {
        html += `
          <div class="task-item">
            <div class="task-title">${saved.title} (–æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏)</div>
            <div class="task-status">–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å</div>
          </div>
        `;
      }
    }

    listEl.innerHTML = html || '<div class="no-tasks">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</div>';
  });
}
```

### –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
1. –ó–∞–º–µ–Ω–∏ –≤ `popup.js`:
   - `YOUGILE_API_KEY` ‚Äî –Ω–∞ —Å–≤–æ–π Bearer-—Ç–æ–∫–µ–Ω.
   - `YOUGILE_COLUMN_ID` ‚Äî –Ω–∞ ID –∫–æ–ª–æ–Ω–∫–∏.
   - `USER_NAME` ‚Äî –Ω–∞ —Å–≤–æ—ë –§–ò–û (—á—Ç–æ–±—ã –∑–∞–¥–∞—á–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–ª–∏—Å—å –ø–æ –∏–º–µ–Ω–∏).
2. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ `chrome://extensions/`.
3. –°–æ–∑–¥–∞–π –ø–∞—Ä—É —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–¥–∞—á ‚Üí –ø–µ—Ä–µ–π–¥–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "–ú–æ–∏ –∑–∞–¥–∞—á–∏" ‚Üí —É–≤–∏–¥–∏—à—å —Å—Ç–∞—Ç—É—Å—ã –∏ –∏—Ç–æ–≥–∏.

–ö–æ–≥–¥–∞ –≤—Å—ë –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–µ—à—å –∏ —É–±–µ–¥–∏—à—å—Å—è, —á—Ç–æ —Å—Ç–∞—Ç—É—Å—ã –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Äî —ç—Ç—É –∂–µ –ª–æ–≥–∏–∫—É (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ storage + fetch –∑–∞–¥–∞—á) –º—ã –ª–µ–≥–∫–æ –ø–µ—Ä–µ–Ω–µ—Å—ë–º –≤ —Ç–≤–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π Corp Portal Enhancer.

–ü–∏—à–∏, –∫–æ–≥–¥–∞ –ø–æ–ø—Ä–æ–±—É–µ—à—å ‚Äî –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è –∏–ª–∏ –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ–¥ —Ç–≤–æ–∏ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫ "–í—ã–ø–æ–ª–Ω–µ–Ω–æ") ‚Äî –ø–æ–¥–ø—Ä–∞–≤–∏–º! üöÄ
